# CatchPlayers 
[![github](https://img.shields.io/badge/github-N501YHappy-brightgreen.svg)](https://github.com/snowdreams1006)
[![github](https://img.shields.io/badge/spigot-1.12.2+-orange.svg)](https://github.com/snowdreams1006)

---

## 插件概述
CatchPlayers 是一个基于 Bukkit 的 Minecraft 插件，允许玩家通过特定的操作捕捉并控制其他实体（如动物、怪物等），实现独特的交互体验。

## 功能详解

### 玩家捕捉实体
- **触发条件**：玩家右键点击一个实体（如动物、怪物等），且玩家未处于骑乘状态、正在潜行且身上没有其他乘客。
- **实现逻辑**：
    - 检查目标实体是否有乘客，如果没有，则直接让玩家成为该实体的乘客。
    - 如果目标实体已有乘客，则调用 `addPassenger` 方法，将目标实体及其乘客依次添加到玩家身上，形成一个“乘客链”。

### 玩家释放乘客
- **触发条件**：玩家左键点击空气或方块，且玩家身上有乘客。
- **实现逻辑**：调用 `release` 方法，移除玩家身上的第一个乘客，并根据指定的速度（默认为 1）让该乘客沿着玩家的朝向方向飞出。

### 处理实体攻击玩家
- **触发条件**：一个实体攻击玩家，且该玩家身上有乘客。
- **实现逻辑**：调用 `release` 方法，立即将玩家身上的乘客释放，速度为 0，即乘客不会获得额外的速度，只是简单地从玩家身上移除。

## 辅助方法

### addPassenger 方法
用于将一个实体及其乘客依次添加到另一个实体上，形成“乘客链”。递归地处理目标实体的乘客，确保所有乘客都被正确添加到目标实体上。

### release 方法
用于释放玩家身上的乘客。移除玩家身上的第一个乘客，并根据指定的速度让该乘客沿着玩家的朝向方向飞出，实现乘客的“释放”效果。

## 代码结构
- `CatchLis` 类实现了 `Listener` 接口，包含以下事件处理器：
    - `player_catch`：处理玩家右键点击实体的事件，实现玩家捕捉实体的功能。
    - `onPlayerInteract`：处理玩家左键点击事件，实现玩家释放乘客的功能。
    - `Attacks`：处理实体攻击玩家的事件，确保玩家在被攻击时释放乘客。
- 辅助方法 `addPassenger` 和 `release` 分别用于实现乘客的添加和释放逻辑。

## 使用说明
- 将插件的 JAR 文件放置在服务器的 `plugins` 文件夹中。
- 重启服务器，插件将自动加载并开始工作。
- 玩家可以通过右键点击实体来捕捉它们，并通过左键点击来释放乘客。
- 当玩家受到实体攻击时，插件会自动释放玩家身上的乘客，以避免玩家在战斗中意外携带乘客。

## 注意事项
- 确保服务器使用的是支持 Bukkit API 的 Minecraft 服务器版本。
- 插件的某些功能可能受到游戏版本和服务器配置的影响，请根据实际情况进行测试和调整。
- 在使用插件时，建议玩家熟悉其操作方式，以避免意外情况的发生。